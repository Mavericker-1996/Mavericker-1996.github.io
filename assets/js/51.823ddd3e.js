(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{200:function(t,s,e){t.exports=e.p+"assets/img/lifecircle.080169e8.png"},201:function(t,s,e){t.exports=e.p+"assets/img/console1.901cd117.png"},203:function(t,s,e){"use strict";e.r(s);var n=[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生命周期","aria-hidden":"true"}},[this._v("#")]),this._v(" 生命周期")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:e(200),alt:"lifecirlce"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"挂载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#挂载","aria-hidden":"true"}},[this._v("#")]),this._v(" 挂载")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("不过我们首先要明白"),s("strong",[this._v("挂载")]),this._v("的定义：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("React.js 将组件渲染，并且构造 DOM 元素然后塞入页面的过程称为组件的挂载，其实也就是对应ReactDOM.render()的过程。")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("ReactDOM"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("render")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n "),e("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Header "),e("span",{attrs:{class:"token operator"}},[t._v("/")]),e("span",{attrs:{class:"token operator"}},[t._v(">")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  document"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("getElementById")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token string"}},[t._v("'root'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("ReactDOM"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("render")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  React"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("createElement")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Header"),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("null")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  document"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("getElementById")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token string"}},[t._v("'root'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("其实我们把 "),s("code",[this._v("Header")]),this._v(" 组件传给了 "),s("code",[this._v("React.createElement")]),this._v(" 函数，又把函数返回结果传给了 "),s("code",[this._v("ReactDOM.render")]),this._v("。我们可以简单猜想一下它们会干什么事情：")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{attrs:{class:"token comment"}},[t._v("// React.createElement 中实例化一个 Header")]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" header "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{attrs:{class:"token class-name"}},[t._v("Header")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" children"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{attrs:{class:"token comment"}},[t._v("// React.createElement 中调用 header.render 方法渲染组件的内容")]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" headerJsxObject "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" header"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("render")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{attrs:{class:"token comment"}},[t._v("// ReactDOM 用渲染后的 JavaScript 对象来来构建真正的 DOM 元素")]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" headerDOM "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{attrs:{class:"token function"}},[t._v("createDOMFromObject")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("headerJsxObject"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{attrs:{class:"token comment"}},[t._v("// ReactDOM 把 DOM 元素塞到页面上")]),t._v("\ndocument"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("getElementById")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token string"}},[t._v("'root'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("appendChild")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("headerDOM"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"constructor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#constructor","aria-hidden":"true"}},[this._v("#")]),this._v(" constructor")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("constructor")]),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("props"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("如果你没有初始化 状态(state) ，并且没有绑定方法，你不需要为你的 React 组件实现一个构造函数。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("React 组件的构造函数在 挂载(mounted) 之前被调用。 在实现 "),s("code",[this._v("React.Component")]),this._v(" 子类的构造函数时， 你应该在任何其他声明之前调用"),s("code",[this._v("super(props)")]),this._v("。 否则，"),s("code",[this._v("this.props")]),this._v(" 将在 constructor(构造函数) 中是 undefined(未定义) ，这将导致 bug 。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"render"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#render","aria-hidden":"true"}},[this._v("#")]),this._v(" render")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("render()")]),this._v(" 方法是类组件中唯一必须的方法。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("render()")]),this._v("根据组件的props和state（两者的重传递和重赋值，无论值是否有变化，都可以引起组件重新render） ，并return 一个React元素（描述组件，即UI）。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("render()")]),this._v("不负责组件实际渲染工作，之后由React自身根据此元素去渲染出页面DOM。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("render()")]),this._v("是纯函数（Pure function：函数的返回结果只依赖于它的参数；函数执行过程里面没有副作用）。这意味着它不会修改组件状态，每次调用它时返回相同的结果，它不会直接与浏览器交互。所以不能在里面执行"),s("code",[this._v("this.setState()")]),this._v("，会有改变组件状态的副作用。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"getsnapshotbeforeupdate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getsnapshotbeforeupdate","aria-hidden":"true"}},[this._v("#")]),this._v(" getSnapshotBeforeUpdate()")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{attrs:{class:"token function"}},[t._v("getSnapshotBeforeUpdate")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevProps"),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("getSnapshotBeforeUpdate()")]),this._v(" 在最近一次的渲染输出被提交之前调用。它使您的组件能够在DOM发生潜在变化之前捕获一些信息（例如滚动位置）。此生命周期返回的任何值将作为参数传递给"),s("code",[this._v("componentDidUpdate()")]),this._v("。下面会有例子进行详细说明。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"componentdidmount"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#componentdidmount","aria-hidden":"true"}},[this._v("#")]),this._v(" componentDidMount()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("componentDidMount()")]),this._v(" 在组件装载(mounting)（插入树）后被立即调用并且只执行一次。初始化所需要的 DOM 节点的应该放在这里。 如果你需要从远程加载数据，这是一个实例化网络请求的好地方。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"componentdidupdate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#componentdidupdate","aria-hidden":"true"}},[this._v("#")]),this._v(" componentDidUpdate()")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{attrs:{class:"token function"}},[t._v("componentDidUpdate")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevProps"),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState"),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" snapshot"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("componentDidUpdate()")]),this._v(" 在更新发生后立即被调用。 这个方法在第一次渲染时不会被调用。")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{attrs:{class:"token function"}},[t._v("componentDidUpdate")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevProps"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{attrs:{class:"token comment"}},[t._v("// Typical usage (don't forget to compare props):")]),t._v("\n  "),e("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token keyword"}},[t._v("this")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userID "),e("span",{attrs:{class:"token operator"}},[t._v("!==")]),t._v(" prevProps"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userID"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{attrs:{class:"token keyword"}},[t._v("this")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("fetchData")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token keyword"}},[t._v("this")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userID"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"componentwillunmount"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#componentwillunmount","aria-hidden":"true"}},[this._v("#")]),this._v(" componentWillUnmount()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("componentWillUnmount()")]),this._v(" 在一个组件被 卸载(unmounted) 和 销毁(destroyed) 之前立即被调用。 在此方法中执行任何必要的清理，例如使计时器无效，取消网络请求，或清理在 "),s("code",[this._v("componentDidMount")]),this._v(" 中创建的任何 DOM 元素。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("所以不应该在 componentWillUnmount() 中调用 "),s("code",[this._v("setState()")])]),this._v(" ，因为组件不会被重新渲染。 一旦组件实例卸载(unmounted)后，将永远不会再次装载(mounted)它。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"demo1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#demo1","aria-hidden":"true"}},[this._v("#")]),this._v(" Demo1")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:e(201),alt:"console1"}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("这和我们的预期是相符的，"),e("code",[t._v("constructor")]),t._v("负责初始化"),e("code",[t._v("state")]),t._v("，"),e("code",[t._v("componentDidMount")]),t._v("只执行一次，接下来的每次"),e("code",[t._v("state")]),t._v("更新便会调用"),e("code",[t._v("componentDidUpdate")]),t._v("方法。")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ol",[e("li",[t._v("当 "),e("code",[t._v("<Clock />")]),t._v(" 被传入 "),e("code",[t._v("ReactDOM.render()")]),t._v(" 时, React 会调用 "),e("code",[t._v("Clock")]),t._v("组件的构造函数。 因为 "),e("code",[t._v("Clock")]),t._v(" 要显示的是当前时间，所以它将使用包含当前时间的对象来初始化 "),e("code",[t._v("this.state")]),t._v(" 。我们稍后会更新此状态。")]),t._v(" "),e("li",[t._v("然后 React 调用了 "),e("code",[t._v("Clock")]),t._v(" 组件的 "),e("code",[t._v("render()")]),t._v(" 方法。 React 从该方法返回内容中得到要显示在屏幕上的内容。然后，React 然后更新 DOM 以匹配 "),e("code",[t._v("Clock")]),t._v(" 的渲染输出。")]),t._v(" "),e("li",[t._v("当 "),e("code",[t._v("Clock")]),t._v(" 输出被插入到 DOM 中时，React 调用 "),e("code",[t._v("componentDidMount()")]),t._v(" 生命周期方法。在该方法中，"),e("code",[t._v("Clock")]),t._v(" 组件请求浏览器设置一个定时器来一次调用 "),e("code",[t._v("tick()")]),t._v("。")]),t._v(" "),e("li",[t._v("浏览器会每隔一秒调用一次 "),e("code",[t._v("tick()")]),t._v("方法。在该方法中， "),e("code",[t._v("Clock")]),t._v(" 组件通过 "),e("code",[t._v("setState()")]),t._v(" 方法并传递一个包含当前时间的对象来安排一个 UI 的更新。通过 "),e("code",[t._v("setState()")]),t._v(", React 得知了组件 "),e("code",[t._v("state")]),t._v("(状态)的变化, 随即再次调用 "),e("code",[t._v("render()")]),t._v(" 方法，获取了当前应该显示的内容。 这次，"),e("code",[t._v("render()")]),t._v(" 方法中的 "),e("code",[t._v("this.state.date")]),t._v(" 的值已经发生了改变， 从而，其输出的内容也随之改变。React 于是据此对 DOM 进行更新，每次更新React调用"),e("code",[t._v("componentDidUpdate()")]),t._v("生命周期方法。")]),t._v(" "),e("li",[t._v("如果通过其他操作将 "),e("code",[t._v("Clock")]),t._v(" 组件从 DOM 中移除了, React 会调用 "),e("code",[t._v("componentWillUnmount()")]),t._v("生命周期方法, 所以计时器也会被停止。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"demo2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#demo2","aria-hidden":"true"}},[this._v("#")]),this._v(" Demo2")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("我们借用一个例子来说明"),e("code",[t._v("getSnapshotBeforeUpdate()")]),t._v("生命周期方法。我们模拟一个实时推送消息然后我们滚动查看之前信息的场景，如果我们不使用"),e("code",[t._v("getSnapshotBeforeUpdate()")]),t._v("获取到更新DOM前的"),e("code",[t._v("scrollHeight")]),t._v("，就会造成想要看的东西被挤出去了的结果。所以我们要在更新之前调用"),e("code",[t._v("getSnapshotBeforeUpdate()")]),t._v("方法返回当前的"),e("code",[t._v("scrollHeight")]),t._v("作为"),e("code",[t._v("componentDidMount()")]),t._v(" 方法的第三个参数，并设置此时的"),e("code",[t._v("scrollHeight")]),t._v("加上更新的元素的高度。效果如下：")])}],a=e(0),r=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("p",[t._v("首先看一下官方给出的示意图：")]),t._v(" "),t._m(1),t._v(" "),e("p",[t._v("下面我们来逐一介绍。")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),e("p",[t._v("比如下面的代码：")]),t._v(" "),t._m(5),e("p",[t._v("会编译成：")]),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._m(9),t._v(" "),e("p",[t._v("具体表现为：")]),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._v(" "),e("p",[t._v("通常，React 构造函数只用于两个目的：")]),t._v(" "),e("ul",[e("li",[t._v("通过分配一个对象到 "),e("code",[t._v("this.state")]),t._v(" 来初始化"),e("a",{attrs:{href:"https://react.css88.com/docs/state-and-lifecycle.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("本地 state"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("li",[t._v("将 "),e("a",{attrs:{href:"https://react.css88.com/docs/handling-events.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("事件处理程序"),e("OutboundLink")],1),t._v(" 方法绑定到实例。")])]),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),e("p",[t._v("具体表现为：")]),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),e("p",[t._v("具体表现为：")]),t._v(" "),t._m(24),t._m(25),t._v(" "),e("p",[t._v("当组件已更新时，使用此方法作为操作 DOM 的一个机会。 这也是做网络请求的一个好地方，只需你比较当前 props 与以前的 props（例如，如果 props 没有改变，可能不需要网络请求）。")]),t._v(" "),t._m(26),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),e("p",[t._v("接下来我们结合例子进行详细说明。")]),t._v(" "),t._m(30),t._v(" "),e("p",[t._v("我们来实现一个显示当前时间的clock demo，效果如下：")]),t._v(" "),e("iframe",{staticStyle:{width:"100%",height:"500px",border:"0","border-radius":"4px",overflow:"hidden"},attrs:{src:"https://codesandbox.io/embed/ypzk2k04vv",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"}}),t._v(" "),e("p",[t._v("通过查看控制台我们可以看到如下结果：")]),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),e("p",[t._v("接下来我们来回顾一下该过程，以及调用方法的顺序：")]),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),e("iframe",{staticStyle:{width:"100%",height:"500px",border:"0","border-radius":"4px",overflow:"hidden"},attrs:{src:"https://codesandbox.io/embed/0mlxx766mn",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"}})])},n,!1,null,null,null);s.default=r.exports}}]);